# bedrock-web-wallet ChangeLog

## 6.0.0 - 2022-04-18

### Changed
- **BREAKING**: Updated peer dependencies:
  - `@bedrock/web-profile-manager@16`.
- **BREAKING**: This version of the library only works with a server that
  supports backend profile provisioning and access management initialization.
  A server that previously did not support this can be updated to support it
  by installing `@bedrock/profile@17` and `@bedrock/profile-http@16`. This
  upgrade should not change the database structure but will result in removing
  any old profiles that are determined to be broken / unusable, enabling
  users to move beyond any bugs generated by the old corrupted state.
- **BREAKING**: Profile options must be passed separately from profile content
  in `createProfile`.

## 5.0.0 - 2022-04-10

### Changed
- **BREAKING**: Rename package to `@bedrock/web-wallet`.
- **BREAKING**: Convert to module (ESM).

## 4.3.2 - 2022-04-07

### Fixed
- Delete remote age VC if personal photo is missing during reissue.

## 4.3.1 - 2022-04-06

### Fixed
- Handle corrupted or invalidated age VCs during reissue process.

## 4.3.0 - 2022-03-27

### Changed
- Update peer deps:
  - `bedrock-web-profile-manager@14`.

## 4.2.0 - 2022-03-18

### Changed
- Remove unused config vars.

## 4.1.0 - 2022-03-10

### Changed
- Improve age VC refresh code. If a local bundled age VC does
  not match the remote copy, remove it and refresh the remote
  copy.

## 4.0.0 - 2022-03-10

### Changed
- **BREAKING**: Use `@digitalbazaar/age-verification-context@2`.

## 3.0.2 - 2022-03-09

### Fixed
- Ensure VC AV bundle is deleted if container VC ID was not given
  as reissue param.

## 3.0.1 - 2022-03-09

### Fixed
- Ensure `id` is set when passed to credential storage `delete`.

## 3.0.0 - 2022-03-01

### Changed
- **BREAKING**: Use `@digitalbazaar/webkms-client@10` and
  `@digitalbazaar/edv-client@13`.
- **BREAKING**: Require `bedrock-web-profile-manager@13` and
  `bedrock-web-pouch-edv@3` as a peer dependencies.

## 2.1.0 - 2022-02-23

### Added
- Add `inbox` EDV on profile creation.

## 2.0.0 - 2022-02-23

### Changed
- **BREAKING**: Use `bedrock-web-profile-manager@12`,
  `@digitalbazaar/edv-client@12`, and `bedrock-web-pouch-edv@2`. These new
  versions compute encrypted indexes for EDVs differently (more privacy
  preserving) and are therefore incompatible with previous versions.

## 1.2.1 - 2022-02-23

### Fixed
- Fix cache key for profile EDVs (add `referenceIdPrefix` to namespace).

## 1.2.0 - 2022-02-21

### Changed
- Use `@digitalbazaar/age-verification-context` v1.0. This new package
  offers the same feature and API as the old dependency.

## 1.1.0 - 2022-02-21

### Changed
- Remove `_getReferenceId()` from `lib/config.js`.
- Move `onboardLink` to config.

### Added
- Add missing dependencies.

## 1.0.3 - 2022-02-16

### Fixed
- Ensure photo VC is rebundled during age VC reissuance.

## 1.0.2 - 2022-02-16

### Fixed
- Fix typo in `reissue` query.

## 1.0.1 - 2022-02-15

### Fixed
- Fix local credential query bugs.
- Fix bundle filtering bugs.

## 1.0.0 - 2020-02-10

- See git history for changes.
